<!DOCTYPE html> 
<html>
<head>
    <title>Streamline The Cum</title>
</head>
<body>
<link rel='icon' href='favicon.ico' type='image/x-icon'/>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<style>
body {
    background: url("bg_kathy.png") no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

.center {
    padding-top: 300px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    display: block;
}
    
.title {
font: bold 30px arial, sans-serif;
color: #bbb;
}

.back {
font: bold 20px arial, sans-serif;
color: #aaf;
}
</style>

<a href="https://docs.google.com/spreadsheets/d/13ITTbierTG584pAIOklGoFCj4gVnmqCKD_qb6UDXWGA/edit#gid=0" class="back">Back to spreadsheet</a>
<div class="center">
    <div><span class="title" id="title"></span></div>
    <video id="video" width="720" height="70" controls>
        <source src="" type="audio/mp3">
        Your browser does not support HTML5 video.
    </video>
    <div >
        <button style="width:40px;height:30px;" onclick="shiftTime(-15)" type="button"><<</button>
        <button style="width:200px;height:30px;" onclick="playFromTimestamp()" type="button">Play from timestamp</button>
        <button style="width:40px;height:30px;" onclick="shiftTime(15)" type="button">>></button>
    </div>
</div>


<script>
var title = document.getElementById("title");
var vid = document.getElementById("video");

function load() {
    var url = getQueryVariable("url");
    vid.setAttribute("src", url);
    
    title.textContent = getQueryVariable("title");
    playFromTimestamp();
    
    // analytics
    if (getQueryVariable("na") == null) { // na = no analytics
        var http = new XMLHttpRequest();
        http.open("GET", "https://docs.google.com/forms/d/e/1FAIpQLSfVwno2yrs5sxkWyNInPT0CvTHEY9DtSxfuJsgqNTjTj49-kA/formResponse?usp=pp_url&entry.723893007="+ encodeURIComponent(getQueryVariable("title")) +"&submit=Submit");
        http.send();
    }
}

function playFromTimestamp() {
    vid.currentTime=Number(getQueryVariable("time"));
    vid.play();
}

function shiftTime(amount) {
    vid.currentTime = vid.currentTime + amount;
}

function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    console.log('Query variable %s not found', variable);
}


window.onload = load;
</script> 

</body> 
</html>
